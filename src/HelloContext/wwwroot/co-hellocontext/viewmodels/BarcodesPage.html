<link rel="import" href="/sys/paper-dialog/paper-dialog.html" />
<link rel="import" href="/sys/x-barcode/src/x-barcode.html" />
<link rel="import" href="/sys/juicy-table-repeat/juicy-table-repeat.html" />

<template>
    <template is="dom-bind">
        <h2 juicy-style="itemName: Header; height: 35px;">Barcodes</h2>

        <juicy-table-repeat rows="{{model.Codes}}" juicy-style="itemName: Table of barcodes; height: 35px;">
            <table class="table" is="juicy-table">
                <thead>
                    <tr>
                        <th>Identifies</th>
                        <th>Barcode</th>
                        <th>Image</th>
                        <th class="barcodes-controls-header"></th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
            <template is="dom-template" class="row-template">
                <table>
                    <tr>
                        <td>
                            <span>{{item.IdentifiesName}}</span>
                        </td>
                        <td>
                            <span>{{item.Code}}</span>
                        </td>
                        <td>
                            <template is="dom-if" if="{{item.IsCodeCorrect}}">
                                <x-barcode code="{{item.Code}}"></x-barcode>
                            </template>
                        </td>
                        <td>
                            <a class="btn btn-xs btn-default" href="{{item.Url}}">Edit</a>
                            <button value="{{item.Delete$::click}}" class="btn btn-xs btn-default" onmousedown="++this.value">Delete</button>
                        </td>
                    </tr>
                </table>
            </template>
        </juicy-table-repeat>

        <a href="/barcodes/barcodes/" class="btn btn-primary">Add new barcode</a>
        <!-- A bug in Polymer: https://github.com/PolymerElements/iron-fit-behavior/issues/13 -->
        <div class="barcodes-modal" juicy-style="itemName: Confirmation dialog;">
            <paper-dialog opened="[[model.Confirm.Message]]" modal="true">
                <div>
                    <h2>Confirmation</h2>
                    <p>{{model.Confirm.Message}}</p>
                </div>
                <div class="buttons">
                    <button class="btn btn-sm btn-default" dialog-dismiss value="{{model.Confirm.Reject$::click}}" onmousedown="++this.value;">Decline</button>
                    <span>&nbsp;</span>
                    <button class="btn btn-sm btn-primary" dialog-confirm autofocus value="{{model.Confirm.Ok$::click}}" onmousedown="++this.value;">Accept</button>
                </div>
            </paper-dialog>
        </div>
    </template>
</template>
